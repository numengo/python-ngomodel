{
  "$id": "https://numengo.org/ngoschema#",
  "type": "object",
  "$comment": "automatically generated for ngoschema",
  "$defs": {
    "metadata": {
      "type": "object",
      "$defs": {
        "Annotation": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "$comment": {
              "type": "string"
            }
          }
        },
        "IdentifiedObject": {
          "type": "object",
          "properties": {
            "$id": {
              "type": "id"
            },
            "$schema": {
              "type": "id"
            }
          }
        },
        "Metadata": {
          "title": "Object Metadata",
          "type": "object",
          "extends": [
            "#/$defs/metadata/$defs/Annotation"
          ],
          "additionalProperties": true,
          "properties": {
            "extra": {
              "type": "string"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "NamedObject": {
          "title": "Named Object",
          "type": "object",
          "notSerialized": [
            "canonicalName",
            "namePlural",
            "_parentNamed"
          ],
          "notValidated": [
            "_parentNamed"
          ],
          "readOnly": [
            "canonicalName",
            "_parentNamed"
          ],
          "additionalProperties": false,
          "properties": {
            "name": {
              "type": "string"
            },
            "_parentNamed": {
              "$ref": "#/$defs/metadata/$defs/NamedObject"
            },
            "canonicalName": {
              "type": "string"
            },
            "namePlural": {
              "type": "string",
              "default": "{%if this.name %}{{this.name|pluralize}}{% endif %}"
            }
          }
        }
      }
    },
    "types": {
      "type": "object",
      "$defs": {
        "Type": {
          "type": "object",
          "extends": [
            "#/$defs/metadata/$defs/Annotation",
            "#/$defs/metadata/$defs/IdentifiedObject"
          ],
          "aliases": {
            "default": "defaultValue"
          },
          "notSerialized": [
            "_py_type",
            "_type",
            "refCanonicalName",
            "defaultValue"
          ],
          "properties": {
            "_py_type": {
              "type": "importable"
            },
            "_type": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "default": "{{this._type}}"
            },
            "$ref": {
              "type": "id"
            },
            "refCanonicalName": {
              "type": "string"
            },
            "hasDefault": {
              "type": "boolean"
            },
            "defaultValue": true,
            "booleanValue": {
              "type": "boolean"
            },
            "foreignKey": {
              "$ref": "https://numengo.org/ngoschema#/$defs/relationships/$defs/ForeignKey"
            },
            "convert": {
              "type": "boolean"
            },
            "validate": {
              "type": "boolean"
            },
            "serialize": {
              "type": "boolean"
            }
          }
        },
        "NamedType": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Type",
            "#/$defs/metadata/$defs/NamedObject"
          ]
        },
        "constants": {
          "type": "object",
          "$defs": {
            "Constant": {
              "type": "object",
              "extends": [
                "#/$defs/types/$defs/Type"
              ]
            },
            "Null": {
              "type": "object",
              "extends": [
                "#/$defs/types/$defs/constants/$defs/Constant"
              ]
            },
            "True_": {
              "type": "object",
              "extends": [
                "#/$defs/types/$defs/constants/$defs/Constant"
              ],
              "_type": true
            },
            "False_": {
              "type": "object",
              "extends": [
                "#/$defs/types/$defs/constants/$defs/Constant"
              ],
              "_type": false
            }
          }
        },
        "Literal": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Type"
          ],
          "properties": {
            "rawLiterals": {
              "type": "boolean"
            },
            "enum": {
              "type": "array",
              "items": true
            },
            "defaultValueLiteral": {
              "$ref": "#/$defs/types/$defs/RawString"
            }
          },
          "_type": "string"
        },
        "Number": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Literal"
          ],
          "properties": {
            "minimum": {
              "type": "number"
            },
            "exclusiveMinimum": {
              "type": "number"
            },
            "maximum": {
              "type": "number"
            },
            "exclusiveMaximum": {
              "type": "number"
            },
            "defaultValue": {
              "type": "number"
            }
          },
          "_type": "number"
        },
        "Integer": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Number"
          ],
          "properties": {
            "minimum": {
              "type": "integer"
            },
            "exclusiveMinimum": {
              "type": "integer"
            },
            "maximum": {
              "type": "integer"
            },
            "exclusiveMaximum": {
              "type": "integer"
            },
            "defaultValue": {
              "type": "integer"
            }
          },
          "_type": "integer"
        },
        "String": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Literal"
          ],
          "properties": {
            "length": {
              "type": "integer"
            },
            "minLength": {
              "type": "integer"
            },
            "maxLength": {
              "type": "integer"
            },
            "pattern": {
              "type": "string"
            },
            "format": {
              "type": "string"
            }
          },
          "_type": "string"
        },
        "RawString": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/String"
          ],
          "rawLiterals": true
        },
        "Id": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/String"
          ],
          "convert": true,
          "validate": true,
          "properties": {
            "uri": {
              "type": "string"
            },
            "canonicalName": {
              "type": "string"
            }
          },
          "_type": "id"
        },
        "Boolean": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Literal"
          ],
          "properties": {
            "defaultValue": {
              "type": "boolean"
            }
          },
          "_type": "boolean"
        },
        "Uri": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Literal"
          ],
          "_type": "uri"
        },
        "Path": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Uri"
          ],
          "properties": {
            "expandUser": {
              "type": "boolean"
            },
            "resolve": {
              "type": "boolean"
            }
          },
          "_type": "path"
        },
        "Date": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Literal"
          ],
          "_type": "date"
        },
        "Time": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Literal"
          ],
          "_type": "time"
        },
        "Datetime": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Date",
            "#/$defs/types/$defs/Time"
          ],
          "_type": "datetime"
        },
        "Array": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Type"
          ],
          "properties": {
            "minItems": {
              "type": "integer"
            },
            "maxItems": {
              "type": "integer"
            },
            "items": true,
            "uniqueItems": {
              "type": "boolean"
            },
            "defaultValue": {
              "type": "array"
            }
          },
          "_type": "array"
        },
        "Object": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Type"
          ],
          "properties": {
            "required": {
              "type": "array"
            },
            "additionalProperties": {
              "$ref": "#/$defs/types/$defs/Type"
            },
            "properties": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "patternProperties": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "defaultValue": {
              "type": "object"
            }
          },
          "_type": "object"
        },
        "Definition": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/Object",
            "#/$defs/metadata/$defs/NamedObject"
          ],
          "aliases": {
            "$defs": "definitions"
          },
          "notSerialized": [
            "_parentDefinition"
          ],
          "notValidated": [
            "_parentDefinition"
          ],
          "properties": {
            "abstract": {
              "type": "boolean"
            },
            "examples": {
              "type": "array",
              "items": {
                "type": "object"
              }
            },
            "extends": {
              "type": "array",
              "items": {
                "type": "id"
              }
            },
            "dependencies": {
              "type": "object",
              "additionalProperties": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            },
            "aliases": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "negatedAliases": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "notSerialized": {
              "type": "array"
            },
            "notValidated": {
              "type": "array"
            },
            "readOnly": {
              "type": "array"
            },
            "definitions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "_parentDefinition": {
              "$ref": "#/$defs/types/$defs/Definition"
            }
          }
        }
      }
    },
    "protocols": {
      "type": "object",
      "$defs": {
        "descriptors": {
          "type": "object",
          "$defs": {
            "Descriptor": {
              "type": "object",
              "extends": [
                "#/$defs/metadata/$defs/Annotation"
              ],
              "properties": {
                "fget": {
                  "$ref": "https://numengo.org/ngoschema#/$defs/symbols/$defs/functions/$defs/Function"
                },
                "fset": {
                  "$ref": "https://numengo.org/ngoschema#/$defs/symbols/$defs/functions/$defs/Function"
                },
                "fdel": {
                  "$ref": "https://numengo.org/ngoschema#/$defs/symbols/$defs/functions/$defs/Function"
                }
              }
            },
            "PropertyDescriptor": {
              "type": "object",
              "extends": [
                "#/$defs/protocols/$defs/descriptors/$defs/Descriptor"
              ],
              "properties": {
                "pname": {
                  "type": "string"
                },
                "ptype": {
                  "$ref": "https://numengo.org/ngoschema#/$defs/types/$defs/Type"
                }
              }
            }
          }
        },
        "TypeProtocol": {
          "type": "object",
          "properties": {
            "metaclass": {
              "type": "importable",
              "default": "ngoschema.protocols.SchemaMetaclass"
            },
            "$id": {
              "type": "id"
            },
            "schema": {
              "type": "object"
            },
            "bases": {
              "type": "array",
              "items": {
                "type": "importable"
              }
            },
            "attrs": {
              "type": "object"
            }
          }
        },
        "CollectionProtocol": {
          "type": "object",
          "extends": [
            "#/$defs/protocols/$defs/TypeProtocol"
          ],
          "notSerialized": [
            "_parentObject",
            "_rootObject"
          ],
          "notValidated": [
            "_parentObject",
            "_rootObject"
          ],
          "readOnly": [
            "_parentObject",
            "_rootObject"
          ],
          "properties": {
            "lazyLoading": {
              "type": "boolean"
            },
            "_parentObject": {
              "$ref": "#/$defs/protocols/$defs/ObjectProtocol"
            },
            "_rootObject": {
              "$ref": "#/$defs/protocols/$defs/ObjectProtocol"
            }
          }
        },
        "ObjectProtocol": {
          "type": "object",
          "extends": [
            "#/$defs/protocols/$defs/CollectionProtocol",
            "#/$defs/types/$defs/Definition"
          ],
          "properties": {
            "attributeByName": {
              "type": "boolean"
            },
            "propertiesDescriptor": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "ArrayProtocol": {
          "type": "object",
          "extends": [
            "#/$defs/protocols/$defs/CollectionProtocol",
            "#/$defs/types/$defs/Array"
          ]
        }
      }
    },
    "relationships": {
      "type": "object",
      "$defs": {
        "Relationship": {
          "title": "Relationship",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "$schema": {
              "type": "string"
            },
            "fkeys": {
              "$ref": "https://json-schema.org/draft/2019-09/meta/validation#/$defs/stringArray"
            },
            "cardinality": {
              "type": "string"
            },
            "ordering": {
              "type": "string"
            },
            "reverse": {
              "type": "boolean"
            }
          }
        },
        "ForeignKey": {
          "title": "Foreign Key",
          "type": "object",
          "extends": [
            "#/$defs/relationships/$defs/Relationship"
          ],
          "$comment": "to define a relationship to another instance",
          "additionalProperties": false,
          "properties": {
            "$schema": {
              "type": "string"
            },
            "key": {
              "type": "string"
            },
            "backPopulates": {
              "$ref": "#/$defs/relationships/$defs/Relationship"
            },
            "onDelete": {
              "type": "string"
            }
          }
        }
      }
    },
    "variables": {
      "type": "object",
      "$defs": {
        "Scope": {
          "type": "object",
          "enum": [
            "public",
            "protected",
            "private"
          ]
        },
        "Value": {
          "type": "object",
          "properties": {
            "value": true,
            "valueLiteral": {
              "type": "string",
              "rawLiterals": true
            },
            "dimension": true
          }
        },
        "Variable": {
          "type": "object",
          "extends": [
            "#/$defs/types/$defs/NamedType"
          ],
          "properties": {
            "access": {
              "$ref": "#/$defs/variables/$defs/Scope"
            },
            "const": {
              "type": "boolean"
            }
          }
        },
        "VariableValue": {
          "type": "object",
          "extends": [
            "#/$defs/variables/$defs/Variable",
            "#/$defs/variables/$defs/Value"
          ]
        }
      }
    },
    "symbols": {
      "type": "object",
      "$defs": {
        "Symbol": {
          "type": "object",
          "extends": [
            "#/$defs/metadata/$defs/Annotation"
          ],
          "properties": {
            "longDescription": {
              "type": "string"
            },
            "access": {
              "$ref": "https://numengo.org/ngoschema#/$defs/variables/$defs/Scope"
            },
            "symbol": {
              "type": "importable"
            },
            "module": {
              "type": "module"
            }
          }
        },
        "functions": {
          "type": "object",
          "$defs": {
            "Function": {
              "type": "object",
              "extends": [
                "#/$defs/symbols/$defs/Symbol"
              ],
              "properties": {
                "abstract": {
                  "type": "boolean"
                },
                "arguments": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "vargs": {
                  "type": "string"
                },
                "kwargs": {
                  "type": "string"
                },
                "imports": {
                  "type": "array",
                  "items": {
                    "type": "importable"
                  }
                },
                "body": {
                  "type": "string"
                },
                "pseudo": {
                  "type": "string"
                },
                "returns": {
                  "$ref": "https://numengo.org/ngoschema#/$defs/types/$defs/Type"
                },
                "decorators": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "Argument": {
              "type": "object",
              "extends": [
                "#/$defs/variables/$defs/Variable"
              ],
              "properties": {
                "io": {
                  "type": "string"
                },
                "passing": {
                  "type": "string"
                },
                "required": {
                  "type": "boolean"
                }
              }
            },
            "FunctionCall": {
              "type": "object",
              "extends": [
                "#/$defs/symbols/$defs/Symbol"
              ],
              "properties": {
                "arguments": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "classes": {
          "type": "object",
          "$defs": {
            "Class": {
              "type": "object",
              "extends": [
                "#/$defs/types/$defs/Definition",
                "#/$defs/symbols/$defs/Symbol"
              ],
              "additionalProperties": true,
              "properties": {
                "metaclass": {
                  "type": "importable"
                },
                "mro": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "abstract": {
                  "type": "boolean"
                },
                "attributes": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "descriptors": {
                  "$ref": "https://numengo.org/ngoschema#/$defs/protocols/$defs/descriptors/$defs/Descriptor"
                },
                "init": {
                  "$ref": "#/$defs/symbols/$defs/classes/$defs/Method"
                },
                "methods": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "classes": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "Method": {
              "type": "object",
              "extends": [
                "#/$defs/symbols/$defs/functions/$defs/Function"
              ],
              "properties": {
                "const": {
                  "type": "boolean"
                },
                "static": {
                  "type": "boolean"
                },
                "class": {
                  "type": "boolean"
                },
                "virtual": {
                  "type": "boolean"
                }
              }
            }
          }
        },
        "modules": {
          "type": "object",
          "$defs": {
            "Module": {
              "type": "object",
              "extends": [
                "#/$defs/types/$defs/Definition",
                "#/$defs/symbols/$defs/Symbol"
              ],
              "properties": {
                "imports": {
                  "type": "array",
                  "items": {
                    "type": "importable"
                  }
                },
                "variables": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "functions": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "classes": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "modules": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "entities": {
      "type": "object",
      "$defs": {
        "Entity": {
          "title": "Entity",
          "type": "object",
          "extends": [
            "#/$defs/metadata/$defs/IdentifiedObject"
          ],
          "description": "Protocol for persistent entities with primary keys",
          "notSerialized": [
            "primaryKeys"
          ],
          "readOnly": [
            "primaryKeys"
          ],
          "additionalProperties": false,
          "properties": {
            "primaryKeys": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "NamedEntity": {
          "title": "Named Entity",
          "type": "object",
          "extends": [
            "#/$defs/entities/$defs/Entity",
            "#/$defs/metadata/$defs/NamedObject"
          ],
          "additionalProperties": false,
          "properties": {
            "primaryKeys": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "uniqueItems": true,
              "default": [
                "name"
              ]
            }
          },
          "primaryKeys": "name"
        },
        "CanonicalNamedEntity": {
          "title": "Canonical Named Entity",
          "type": "object",
          "extends": [
            "#/$defs/entities/$defs/NamedEntity"
          ],
          "additionalProperties": false,
          "primaryKeys": "canonicalName"
        },
        "EntityWithMetadata": {
          "title": "Entity With Metadata",
          "type": "object",
          "extends": [
            "#/$defs/entities/$defs/CanonicalNamedEntity",
            "https://numengo.org/ngoschema2#/$defs/metadata/$defs/Metadata"
          ],
          "additionalProperties": true
        }
      }
    },
    "documents": {
      "type": "object",
      "$defs": {
        "Document": {
          "title": "Document",
          "type": "object",
          "extends": [
            "#/$defs/entities/$defs/Entity",
            "#/$defs/metadata/$defs/Metadata"
          ],
          "readOnly": [
            "identifier"
          ],
          "additionalProperties": false,
          "properties": {
            "identifier": {
              "type": "string"
            },
            "filepath": {
              "type": "path"
            },
            "binary": {
              "type": "boolean"
            },
            "mimetype": {
              "type": "string",
              "default": "text/plain"
            },
            "charset": {
              "type": "string",
              "default": "utf-8"
            },
            "version": {
              "type": "string"
            },
            "author": {
              "type": "string"
            },
            "dateCreated": {
              "type": "datetime"
            },
            "dateModified": {
              "type": "datetime"
            },
            "contentSize": {
              "type": "integer"
            }
          },
          "primaryKeys": "identifier"
        }
      }
    },
    "queries": {
      "type": "object",
      "$defs": {
        "Filter": {
          "type": "object",
          "additionalProperties": true,
          "properties": {
            "attrs": {
              "type": "array",
              "items": true
            },
            "attrs_value": {
              "type": "object"
            },
            "negate": {
              "type": "boolean"
            },
            "any_of": {
              "type": "boolean"
            }
          }
        },
        "Query": {
          "type": "object",
          "notSerialized": [
            "iterable"
          ],
          "notValidated": [
            "iterable"
          ],
          "readOnly": [
            "result"
          ],
          "properties": {
            "iterable": {
              "type": "array"
            },
            "distinct": {
              "type": "boolean"
            },
            "order_by": true,
            "reverse": {
              "type": "string"
            },
            "result": {
              "type": "array"
            }
          }
        }
      }
    },
    "session": {
      "type": "object",
      "$defs": {
        "Session": {
          "title": "Session",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "autoflush": {
              "type": "boolean",
              "default": true
            },
            "expire_on_commit": {
              "type": "boolean",
              "default": true
            },
            "autocommit": {
              "type": "boolean",
              "default": true
            },
            "bind": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "transforms": {
      "type": "object",
      "$defs": {
        "ObjectTransform": {
          "type": "object",
          "abstract": true,
          "notSerialized": [
            "fromClass",
            "toClass"
          ],
          "properties": {
            "fromClass": {
              "type": "importable"
            },
            "toClass": {
              "type": "importable"
            }
          }
        }
      }
    },
    "managers": {
      "type": "object",
      "$defs": {
        "TypeManager": {
          "type": "object"
        },
        "NamespaceManager": {
          "type": "object"
        }
      }
    },
    "repositories": {
      "type": "object",
      "$defs": {
        "Repository": {
          "title": "Repository",
          "type": "object",
          "abstract": true,
          "notValidated": [
            "instances"
          ],
          "readOnly": [
            "instances"
          ],
          "additionalProperties": false,
          "properties": {
            "objectClass": {
              "type": "importable"
            },
            "primaryKeys": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "many": {
              "type": "boolean"
            },
            "no_defaults": {
              "type": "boolean",
              "default": true
            },
            "use_entity_ref": {
              "type": "boolean",
              "default": true
            },
            "instances": {
              "type": "array"
            }
          }
        },
        "FilterRepositoryMixin": {
          "title": "Filter Repository Mixin",
          "type": "object",
          "abstract": true,
          "additionalProperties": false,
          "properties": {
            "only": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "excludes": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "recursive": {
              "type": "boolean"
            },
            "aliases": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          }
        },
        "MemoryRepository": {
          "title": "Memory Repository",
          "type": "object",
          "extends": [
            "#/$defs/repositories/$defs/Repository",
            "#/$defs/repositories/$defs/FilterRepositoryMixin"
          ],
          "additionalProperties": false
        },
        "FileRepository": {
          "title": "File Repository",
          "type": "object",
          "extends": [
            "#/$defs/repositories/$defs/Repository",
            "#/$defs/repositories/$defs/FilterRepositoryMixin"
          ],
          "abstract": true,
          "additionalProperties": false,
          "properties": {
            "document": {
              "$ref": "https://numengo.org/ngoschema#/$defs/documents/$defs/Document"
            },
            "overwrite": {
              "type": "boolean"
            }
          }
        },
        "JsonFileRepository": {
          "title": "Json File Repository",
          "type": "object",
          "extends": [
            "#/$defs/repositories/$defs/FileRepository"
          ],
          "additionalProperties": true
        },
        "YamlFileRepository": {
          "title": "Yaml File Repository",
          "type": "object",
          "extends": [
            "#/$defs/repositories/$defs/FileRepository"
          ],
          "additionalProperties": true
        },
        "XmlFileRepository": {
          "title": "Xml File Repository",
          "type": "object",
          "extends": [
            "#/$defs/repositories/$defs/FileRepository"
          ],
          "additionalProperties": true,
          "properties": {
            "pretty": {
              "type": "boolean",
              "default": true
            },
            "tag": {
              "type": "string"
            },
            "attr_prefix": {
              "type": "string",
              "default": "@"
            },
            "cdata_key": {
              "type": "string",
              "default": "#text"
            },
            "short_empty_elements": {
              "type": "boolean",
              "default": true
            },
            "indent": {
              "type": "string",
              "default": "\t"
            },
            "newl": {
              "type": "string",
              "default": "\n"
            }
          }
        }
      }
    }
  }
}
